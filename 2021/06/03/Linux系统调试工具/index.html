<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux系统监测工具 | ZeeCloud</title><meta name="keywords" content="Linux"><meta name="author" content="橙"><meta name="copyright" content="橙"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="系统监测工具psps命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵尸、哪些进程占用了过多的资源等等.总之大部分信息都是可以通过执行该命令得到的.ps命令最常用的还是用于监控后台进程的工作情况,因为后台进程是不和屏幕键盘这些标准输入&#x2F;输出设备进行通信的,所以如果需要检测其情况,便可以使用ps命令了.ps是显示瞬间进程的状态，并不动态连续；如果想对进程进行实时监控应该用top命">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux系统监测工具">
<meta property="og:url" content="http://example.com/2021/06/03/Linux%E7%B3%BB%E7%BB%9F%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/index.html">
<meta property="og:site_name" content="ZeeCloud">
<meta property="og:description" content="系统监测工具psps命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵尸、哪些进程占用了过多的资源等等.总之大部分信息都是可以通过执行该命令得到的.ps命令最常用的还是用于监控后台进程的工作情况,因为后台进程是不和屏幕键盘这些标准输入&#x2F;输出设备进行通信的,所以如果需要检测其情况,便可以使用ps命令了.ps是显示瞬间进程的状态，并不动态连续；如果想对进程进行实时监控应该用top命">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2021-06-03T07:44:19.143Z">
<meta property="article:modified_time" content="2021-06-03T07:43:46.363Z">
<meta property="article:author" content="橙">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.jpeg"><link rel="canonical" href="http://example.com/2021/06/03/Linux%E7%B3%BB%E7%BB%9F%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux系统监测工具',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-06-03 15:43:46'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://i.loli.net/2021/06/01/ZUNfC6gGcO5ykdB.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">ZeeCloud</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux系统监测工具</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-06-03T07:44:19.143Z" title="发表于 2021-06-03 15:44:19">2021-06-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-06-03T07:43:46.363Z" title="更新于 2021-06-03 15:43:46">2021-06-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/">学习总结</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux系统监测工具"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="系统监测工具"><a href="#系统监测工具" class="headerlink" title="系统监测工具"></a>系统监测工具</h1><h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><p>ps命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵尸、哪些进程占用了过多的资源等等.总之大部分信息都是可以通过执行该命令得到的.<br>ps命令最常用的还是用于监控后台进程的工作情况,因为后台进程是不和屏幕键盘这些标准输入/输出设备进行通信的,所以如果需要检测其情况,便可以使用ps命令了.<br>ps是显示瞬间进程的状态，并不动态连续；如果想对进程进行实时监控应该用top命令。</p>
<p>常见选项如下：</p>
<ul>
<li>-A ：所有的进程均显示出来；</li>
<li>-a ： 显示现行终端机下的所有进程，包括其他用户的进程；</li>
<li>-u ：以用户为主的进程状态 ；</li>
<li>x ：通常与 a 这个参数一起使用，可列出较完整信息。<br>输出格式规划：</li>
<li>l ：较长、较详细的将该 PID 的的信息列出；</li>
<li>j ：工作的格式 (jobs format)</li>
<li>-f ：做一个更为完整的输出。</li>
</ul>
<p>常见用法如下：<br>1.使用BSD语法查看系统上的每一个进程<br>ps ax<br>ps axu<br><img src="https://img-blog.csdnimg.cn/20210602165619898.png" alt="在这里插入图片描述"></p>
<p>信息含义：</p>
<ul>
<li>USER：进程所属用户</li>
<li>PID ：进程ID号</li>
<li>%CPU：CPU占用率</li>
<li>%MEM：内存占用率</li>
<li>VSZ ：该进程使用掉的虚拟内存量 (Kbytes)</li>
<li>RSS ：该进程占用的固定的内存量 (Kbytes)</li>
<li>TTY ：该进程是在那个终端机上面运作，若与终端机无关，则显示 ?，另外， tty1-tty6 是本机上面的登入者程序，若为 pts/0 等等的，则表示为由网络连接进主机的程序。</li>
<li>STAT：该程序目前的状态，主要的状态有：<br>R ：该程序目前正在运作<br>S ：该程序目前正在睡眠<br>T ：该程序目前正在侦测或者是停止了；<br>Z ：僵尸进程</li>
<li>START：该进程被触发启动的时间；</li>
<li>TIME ：该进程实际使用 CPU 运作的时间。</li>
<li>COMMAND：该程序的实际指令</li>
</ul>
<h2 id="top"><a href="#top" class="headerlink" title="top"></a>top</h2><p>top 命令主要用于查看进程的相关信息，同时它也会提供系统平均负载，cpu 信息和内存信息。</p>
<p>执行top命令界面<br><img src="https://img-blog.csdnimg.cn/2021060217340371.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDkxOTk0NA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>第一行是系统的平均负载，告知系统运行了多少时间。和uptime命令输出一样：<br><img src="https://img-blog.csdnimg.cn/20210602173500815.png" alt="在这里插入图片描述"></p>
<p>第二行是对系统任务（进程和线程的统计）信息的统计：<br><img src="https://img-blog.csdnimg.cn/20210602173722949.png" alt="在这里插入图片描述"></p>
<p>第三行显示CPU占用情况：<br><img src="https://img-blog.csdnimg.cn/20210602174010255.png" alt="在这里插入图片描述"><br>这里一共有八个字段，是我们了解 CPU 负载的主要依据，下面我们逐一介绍。<br>us<br>进程在用户地址空间中消耗 CPU 时间的百分比。<br>sy<br>进程在内核地址空间中消耗 CPU 时间的百分比。<br>ni<br>ni 是 nice 的缩写，可以通过 nice 值调整进程用户态的优先级。<br>id<br>CPU 处于 空闲状态（idle)的百分比。一般情况下， us + ni + id 应该接近 100%。<br>wa<br>CPU 等待磁盘 IO 操作的时间。<br>hi &amp; si<br>这两个值表示系统处理中断消耗的时间。中断分为硬中断和软中断，hi 表示处理硬中断消耗的时间，si 表示处理软中断消耗的时间。硬中断是硬盘、网卡等硬件设备发送给 CPU 的中断消息，当 CPU 收到中断消息后需要进行适当的处理(消耗 CPU 时间)。软中断是由程序发出的中断，最终也会执行相应的处理程序(消耗 CPU 时间)。<br>st<br>只有 Linux 在作为虚拟机运行时 st 才是有意义的。它表示虚机等待 CPU 资源的时间(虚机分到的是虚拟 CPU，当需要真实的 CPU 时，可能真实的 CPU 正在运行其它虚机的任务，所以需要等待)。</p>
<p>内存信息包含两行内容，内存和交换空间：<br><img src="https://img-blog.csdnimg.cn/20210602174724110.png" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20210602174853444.png" alt="在这里插入图片描述"></p>
<p>默认情况下这里会显示 12 列数据，都是我们比较关心的进行相关的信息，下面我们一个一个的介绍。<br>PID 表示进程 ID。<br>USER 表示进程所有者的有效用户名称。简单说就是以哪个用户权限启动的进程。比如上图中有两个进程是用户 nick 启动的，还有一个是用户 prometheus 启动的，其它都是 root 用户启动的。<br>PR 表示进程执行的优先级，PR 的值是以 Linux 内核的视角看到的进程执行的优先级。<br>NI 从用户视角看到的进程执行优先级。注意上图中 NI 值为 -20 的两个进程，它们的 PR 值都是 0。<br>VIRT 表示进程使用的虚拟内存大小。<br>RES 表示进程使用的物理内存大小。<br>SHR 表示进程使用的共享内存的大小。<br>S 表示进程当前的状态。S 值有下面几种：<br>D 不可中断的睡眠状态(uninterruptible sleep)<br>R 正在运行的状态(running)<br>S 睡眠状态(sleeping)<br>T 跟踪或停止状态(traced or stopped)<br>Z 僵尸状态(zombie)<br>%CPU 表示进程使用 CPU 的百分比。<br>%MEM 表示进程使用内存的百分比。<br>TIME+ 表示进程累计使用的 CPU 时间。<br>COMMAND 表示运行进程对应的程序。</p>
<h2 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h2><p>lsof（list open file)是一个列出当前系统打开的文件描述符的工具。通过它我们可以了解感兴趣的进程打开了那些文件描述符，或者我们感兴趣的文件描述符被哪些进程打开了。</p>
<p>lsof命令常用选项包括：</p>
<ul>
<li><p>-i：显示socket文件描述符，该选项的使用方法是：</p>
</li>
<li><p>$ lsof -i [46]  [protocal] [@hostname][ipaddr][:service|port]<br>其中，4表示IPV4协议，6表示IPV6协议；protocol指定传输层协议，可以是TCP或UDP；hostname指定主机名；ipaddr指定主机的ip地址；service指定服务名；port指定端口号。比如，要显示所有连接到主机192.168.1.108的ssh服务的sockfd文件描述符，可以使用命令；<br>$ lsof <a href="mailto:&#45;&#x69;&#64;&#49;&#57;&#50;&#x2e;&#x31;&#54;&#56;&#x2e;&#x31;&#46;&#49;&#48;&#x38;">&#45;&#x69;&#64;&#49;&#57;&#50;&#x2e;&#x31;&#54;&#56;&#x2e;&#x31;&#46;&#49;&#48;&#x38;</a>;22<br>如果-i选项后不指定任何参数，则lsof命令将显示所有socket文件描述符。</p>
</li>
<li><p>-u：显式指定用户启动的所有进程打开的文件描述符。</p>
</li>
<li><p>-c：显式指定的命令打开的所有文件描述符。比如要查看websrv程序打开了哪些文件描述符，可以使用如下命令：<br>$ lsof -c websrv</p>
</li>
<li><p>-p：显式指定进程打开的所有文件描述符。</p>
</li>
<li><p>-t：仅显示打开了目标文件描述符的进程的PID。<br>我们还可以直接将文件名作为lsof命令的参数，以查看哪些进程打开了该文件。</p>
</li>
</ul>
<p>下面介绍一个实例：查看mycinema服务器打开了哪些文件描述符。</p>
<p>具体操作做如下：</p>
<p><img src="https://img-blog.csdnimg.cn/20210602201331854.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210602203517157.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210602203547407.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210602203952893.png" alt="在这里插入图片描述"></p>
<p>lsof命令的输出相当丰富，其中每行内容包括如下字段：</p>
<ul>
<li>COMMAND：执行程序所使用的终端命令（默认仅显示前9个字符）。</li>
<li>PID：文件描述符所属进程的PID。</li>
<li>USER：拥有该文件按描述符的用户的用户名。</li>
<li>FD：文件描述符的描述。cwd表示进程的工作目录，rtd表示用户的根目录，txt表示进程运行的程序代码，mem表示直接映射到内存中的文件。有的FD以“数字+访问权限”表示的，其中数字是文件描述符中的具体数值，访问权限包括r（可读）、w（可写）和u（可读可写）。0u，1u，2u分别表示标准输入，标准输出，标准错误输出。9u表示套接字，17u表示LISTEN状态的监听socket。18u表示内核事件表对应的文件描述符。</li>
<li>TYPE：文件描述符的类型。其中DIR是目录，REG是普通文件，CHR是字符设备文件，IPV4是IPV4类型的sockfd文件描述符，0000是未知类型。</li>
<li>DEVICE：文件所属设备。对于字符设备和块设备，其表示方法是“主设备号，次设备号”。对于FIFO类型文件，比如管道和socket，该字段将显示一个内核引用目标文件的地址，或者是其i节点号。</li>
<li>SIZE/OFF：文件大小或者偏移值。如果该字段显示“0t<em>”或者“0x</em>”，就表示这是一个偏移值，否则就表示这是一个文件大小。对字符设备或者块设备类型的文件定义大小没有意义，所以该字段将显示一个偏移值。</li>
<li>NODE：文件的i节点号。对于socket，则显示为协议类型，比如“TCP”。</li>
<li>NAME：文件的名字。</li>
</ul>
<h2 id="df"><a href="#df" class="headerlink" title="df"></a>df</h2><p> df命令列出指定的每一个文件名所在的文件系统上可用磁盘空间的数量。 如果没有指定文件名,则显示当前所有使用中的文件系统.缺省设置时,磁盘空间以1K为一块显示,如果环境变量POSIXLY_CORRECT已设置,则采用512字节为一块显示.<br>  如果参数是一个包含已使用文件系统的磁盘设备名,df命令显示出的是该文件系统的可用空间,而非包含设备结点的文件系统(只能是根文件系统).<br>df常用选项如下：</p>
<ul>
<li><p>-a, –all  ：列出包括BLOCK为0的文件系统</p>
</li>
<li><p>–block-size=SIZE use SIZE-byte blocks ：指定块的大小</p>
</li>
<li><p>-h,–huma-readable：用常见的格式显示出大小(例如:1K 234M 2G)</p>
</li>
<li><p>H,–si ：同上,但是这里的1k等于1000字节而不是1024字节</p>
</li>
<li><p>-i, –inodes： 信息索引点代替块表示使用状况</p>
</li>
<li><p> -k, –kilobytes：指定块大小等于1024字节来显示使用状况</p>
</li>
<li><p>-l, –local：只显示本地文件系统使用状况</p>
</li>
<li><p>-m, –megabytes：以指定块大小等于1048576字节(1M)来显示使用状况</p>
</li>
<li><p>-T, –print-type： 输出每个文件系统的类型</p>
</li>
</ul>
<p>查看文件系统使用情况示例：<br><img src="https://img-blog.csdnimg.cn/20210602213250954.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDkxOTk0NA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="du"><a href="#du" class="headerlink" title="du"></a>du</h2><p>du命令 报告指定的文件已使用的磁盘空间的总量，包括在层次结构中以这些以指定文件为根的目录在内。这里的“已使用的磁盘空间”意思 为指定的文件下的整个文件层次结构所使用的空间。<br>常见选项如下：</p>
<ul>
<li><p>-k     用1024字节作为计数单位，替代缺省时512字节的计数单位。</p>
</li>
<li><p>-x     只输出指定参数的实际使用空间，而不包括其下的子目录。</p>
</li>
<li><p> -s     只统计指定参数的在同一设备上所使用的空间。</p>
</li>
<li><p> -h       为每个数附加一个表示大小单位的字母，像用M表示二进制 的兆字节。</p>
</li>
</ul>
<p>查看当前目录：<br><img src="https://img-blog.csdnimg.cn/20210602222419427.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDkxOTk0NA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>查看指定目录：<br><img src="https://img-blog.csdnimg.cn/20210602222347420.png" alt="在这里插入图片描述"></p>
<h2 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h2><p>vmstat是vitual memory statistics的缩写，它能实时输出系统中的各种资源使用情况，比如进程信息，内存使用，CPU使用率以及IO使用情况。</p>
<p>vmstat命令常用选项和参数包括</p>
<ul>
<li>-f：显示系统自启动以来fork的次数。</li>
<li> -s：显示内存相关的统计信息以及多种系统活动的数量（比如CPU上下文切换次数）。</li>
<li> -d：显示磁盘相关的统计信息。</li>
<li> -p：显式指定磁盘分区的统计信息。</li>
<li> -S：使用指定的单位来显示。参数k，K，m，M分别代表1000，1024，1 000 000和1 048 576字节。</li>
<li> delay：采样间隔（单位是s），即每隔delay的时间输出一次统计信息。</li>
<li> count：采样次数，即共输出count次统计信息。</li>
</ul>
<p>默认情况下输出内容：<br><img src="https://img-blog.csdnimg.cn/20210602224136273.png" alt="在这里插入图片描述"></p>
<p>注意，第一行输出是系统自启动以来的平均结果，而后面的输出则是采样间隔内的平均结果。vmstat的每条输出都包含6个字段，它们的含义分别是：</p>
<ul>
<li>proc：进程信息。“r”表示等待运行的进程的数目，“b”表示处于不可中断睡眠状态的进程数目。</li>
<li>memory：内存信息，各项的单位都是千字节（KB）。“swpd”表示虚拟内存的使用数量。“free”表示空闲内存的数量。“buff”表示作为“buff cache”的内存数量。从磁盘读入的数据可能被保存在“buff cache”中，以便下一次快速访问。“cache”表示作为“page cache”的内存数量。待写入磁盘的数据将首先被放到“page cache”中，然后由磁盘中断程序写入磁盘。</li>
<li>swap：交换分区（虚拟内存）的使用信息，各项的单位都是KB/s。“si”表示数据由磁盘交换自内存的速率，“so”表示数据由内存交换自磁盘的速率。如果这两个值经常发生改变，则说明内存不足。</li>
<li>io：块设备的使用信息，单位是block/s。“bi”表示从块设备读入的速率，“bo”表示向块设备写入块的速率。</li>
<li>system：系统信息。“in”表示每秒发生中断的次数，“cs”表示每秒发生的上下文切换速率。</li>
<li>cpu：CPU使用信息。“us”表示系统所有进程运行在用户空间的时间占CPU总运行时间的比例，“sy”表示系统所有进程运行在内核空间的时间占CPU总运行时间的比例，“id”表示CPU处于空闲状态的时间占CPU总运行时间的比例，“wa”表示CPU等待IO事件的时间占CPU总运行时间的比例。</li>
</ul>
<p>可以使用iostat命令获取磁盘使用情况的更多信息，也可以使用mpstat获得CPU使用情况的更多信息。vmstat主要用于查看系统内存的使用情况。</p>
<h2 id="mpstat"><a href="#mpstat" class="headerlink" title="mpstat"></a>mpstat</h2><p>待补充</p>
<h2 id="iostat"><a href="#iostat" class="headerlink" title="iostat"></a>iostat</h2><p>待补充</p>
<h1 id="网络监测工具"><a href="#网络监测工具" class="headerlink" title="网络监测工具"></a>网络监测工具</h1><h2 id="tcpdump"><a href="#tcpdump" class="headerlink" title="tcpdump"></a>tcpdump</h2><p>tcpdump是一款经典的网络抓包工具。即使在今天，我们拥有像Wireshark这样更易于使用和掌握的抓包工具,tcpdump仍然是网络程序员的必备利器。<br>tcpdump给使用者提供了大量的选项，用以过滤数据包或者定制输出格式。常见的选项总结如下:</p>
<ul>
<li>-n：使用IP地址表示主机，而不是主机名;使用数字表示端口号,而不是服务名称。</li>
<li>-i：指定要监听的网卡接口。“-i any”表示抓取所有网卡接口上的数据包。</li>
<li>-v：输出一个稍微详细的信息，例如，显示IP数据包中的TTL和 TOS信息。-t,不打印时间截。</li>
<li>-e：显示以太网帧头部信息。</li>
<li>-c：仅抓取指定数量的数据包。</li>
<li>-x：以十六进制数显示数据包的内容，但不显示包中以太网帧的头部信息。</li>
<li>-X：与-x选项类似，不过还打印每个十六进制字节对应的ASCII字符。</li>
<li>-XX：与-X相同,不过还打印以太网帧的头部信息。</li>
<li>-s：设置抓包时的抓取长度。当数据包的长度超过抓取长度时，tcpdump抓取到的将是被截断的数据包。在4.0以及之前的版本中，默认的抓包长度是68字节。这对于IP、TCP 和 UDP等协议就已经足够了，但对于像DNS、NFS这样的协议,68字节通常不能容纳一个完整的数据包。比如我们在1.6.3小节抓取 DNS数据包时，就使用了-s选项（测试机器ernest-laptop 上，tcpdump的版本是4.0.0)。不过4.0之后的版本，默认的抓包长度被修改为65535字节,因此我们不用再担心抓包长度的问题了。</li>
<li>-S：以绝对值来显示TCP报文段的序号，而不是相对值。</li>
<li>-w,将tcpdump的输出以特殊的格式定向到某个文件。-t,从文件读取数据包信息并显示之。</li>
</ul>
<p>除了使用选项外，tcpdump还支持用表达式来进一步过滤数据包。tcpdump表达式的操作分为3种：类型（type）、方向（dir）和协议（proto）下面分别介绍。</p>
<ul>
<li><p>类型：解释其后面紧跟着的参数的含义。tcpdump支持的类型包括host，net，port和portrange。它们分别指定主机名（或IP地址），用CIDR方法表示的网络地址，端口号以及端口范围。比如抓取整个1.2.3.0/255.255.255.0网络上的数据包，可以使用如下命令：<br>$ tcpump net 1.2.3.0/24</p>
</li>
<li><p>方向：src指定数据包的发送端,dst指定数据包的目的端。比如要抓取进入端口13579的数据包,可以使用如下命令:<br>$tcpdump dst port 13579</p>
</li>
<li><p>协议：指定目标协议。比加要抓取所有ICMP教据包，可以使用如下命令:<br>$ tepdump icmp</p>
</li>
</ul>
<p>当然，我们还可以使用逻辑损作符来组织上述操作数以创建更复杂的表达式。tcpdump支持的逻辑操作符和编程语言中的逻N损作符完全相同，包括and(或者&amp;&amp;）、or(或者II、not（或者!)。<br>比如要抓取主机 ernest-laptop和所有非Kongming20的主机之间交换的IP数据包，可以使用如下命令:<br>$tcpdump ip host ernest-laptop and not Kongming20</p>
<p>如果表达式比较复杂，那么我们可以使用括号将它们分组。不过在使用括号时，我们要么使用反斜杠“\”对它转义，要么用单引号“’”将其括住，以避免它被shell所解释。<br>比如要抓取来自主机10.0.2.4，目标端口是3389或22的数据包，可以使用如下命令:<br>$ tcpdump ‘src 10.0.2.4 and (dst port3389 or 22)’</p>
<p>此外，tcpdump还允许直接使用数据包中的部分协议字段的内容来过滤数据包。比如,仅抓取 TCP同步报文段，可使用如下命令:<br>$ tcpdump ‘tcp[13] &amp;2!=0.<br>这是因为TCP头部的第14个字节的第2个位正是同步标志。</p>
<p>最后，tcpdump 的具体输出格式除了与选项有关外，还与协议有关。前文中我们讨论过IP、TCP、ICMP、DNS等协议的tcpdump输出格式。</p>
<h2 id="nc"><a href="#nc" class="headerlink" title="nc"></a>nc</h2><p>nc主要用来快速构建网络连接。我们可以让它以服务器的方式运行，监听某个端口并接受客户链接，因此它可用来调试客户端程序，此时它有点像telnet程序。<br>nc常用选项包括：</p>
<ul>
<li>-i：设置数据包传送的时间。</li>
<li> -l：以服务器方式运行，监听指定端口。nc命令默认以客户端方式运行。</li>
<li>-k：重复接收并处理某个端口上的所有连接，必须与-l选项一起使用。</li>
<li>-n：使用IP地址表示主机，而不是主机名。使用数字表示端口号，而不是服务名称。</li>
<li>-p：当nc命令以客户端方式运行时，强制其使用指定端口号。</li>
<li>-s：设置本地主机发送出的数据包的IP地址。</li>
<li>-C：将CR和LF两个字符作为行结束符。</li>
<li>-U：使用UNIX本地域协议通信。</li>
<li>-u：使用UDP协议。nc命令默认使用的传输层协议是TCP协议。</li>
<li>-w：如果nc客户端在指定时间内未检测到任何输入，则退出。</li>
<li>-X：当nc客户端和代理服务器通信时，该选项指定它们之间的通信协议。</li>
<li>x：指定目标代理服务器的IP地址和端口号。</li>
<li>-z：扫描目标机器上的某个或某些服务是否开启（端口扫描）。</li>
</ul>
<h2 id="strance"><a href="#strance" class="headerlink" title="strance"></a>strance</h2><p>待补充</p>
<h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><p>待补充</p>
<h2 id="ifstat"><a href="#ifstat" class="headerlink" title="ifstat"></a>ifstat</h2><p>待补充</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/06/04/%E4%B8%80%E6%96%87%E6%80%BB%E7%BB%93git%E7%9A%84%E7%94%A8%E6%B3%95/"><img class="prev-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">一文总结git的用法</div></div></a></div><div class="next-post pull-right"><a href="/2021/06/02/Linux%E5%A4%84%E7%90%86%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6%E7%9A%84%E5%B7%A5%E5%85%B7/"><img class="next-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux处理目标文件的工具</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/06/02/Linux处理目标文件的工具/" title="Linux处理目标文件的工具"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-02</div><div class="title">Linux处理目标文件的工具</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://i.loli.net/2021/06/01/ZUNfC6gGcO5ykdB.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">橙</div><div class="author-info__description">Success requires accumulation</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://gitee.com/zhong-zhuocheng"><i></i><span>我的主页</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">橙 的个人博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%B5%8B%E5%B7%A5%E5%85%B7"><span class="toc-number">1.</span> <span class="toc-text">系统监测工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ps"><span class="toc-number">1.1.</span> <span class="toc-text">ps</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#top"><span class="toc-number">1.2.</span> <span class="toc-text">top</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lsof"><span class="toc-number">1.3.</span> <span class="toc-text">lsof</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#df"><span class="toc-number">1.4.</span> <span class="toc-text">df</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#du"><span class="toc-number">1.5.</span> <span class="toc-text">du</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vmstat"><span class="toc-number">1.6.</span> <span class="toc-text">vmstat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mpstat"><span class="toc-number">1.7.</span> <span class="toc-text">mpstat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#iostat"><span class="toc-number">1.8.</span> <span class="toc-text">iostat</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%9B%91%E6%B5%8B%E5%B7%A5%E5%85%B7"><span class="toc-number">2.</span> <span class="toc-text">网络监测工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tcpdump"><span class="toc-number">2.1.</span> <span class="toc-text">tcpdump</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nc"><span class="toc-number">2.2.</span> <span class="toc-text">nc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strance"><span class="toc-number">2.3.</span> <span class="toc-text">strance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#netstat"><span class="toc-number">2.4.</span> <span class="toc-text">netstat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ifstat"><span class="toc-number">2.5.</span> <span class="toc-text">ifstat</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/07/12/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E7%BD%91%E7%AB%99%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="实现一个视频播放网站服务器"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="实现一个视频播放网站服务器"/></a><div class="content"><a class="title" href="/2021/07/12/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E7%BD%91%E7%AB%99%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="实现一个视频播放网站服务器">实现一个视频播放网站服务器</a><time datetime="2021-07-12T05:34:23.895Z" title="发表于 2021-07-12 13:34:23">2021-07-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/11/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%AE%9E%E6%97%B6%E7%A4%BE%E4%BA%A4%E8%BD%AF%E4%BB%B6/" title="实现一个社交软件"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="实现一个社交软件"/></a><div class="content"><a class="title" href="/2021/07/11/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%AE%9E%E6%97%B6%E7%A4%BE%E4%BA%A4%E8%BD%AF%E4%BB%B6/" title="实现一个社交软件">实现一个社交软件</a><time datetime="2021-07-11T11:03:48.259Z" title="发表于 2021-07-11 19:03:48">2021-07-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/11/2021-07-06/" title="实现一个跨平台资源共享应用"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="实现一个跨平台资源共享应用"/></a><div class="content"><a class="title" href="/2021/07/11/2021-07-06/" title="实现一个跨平台资源共享应用">实现一个跨平台资源共享应用</a><time datetime="2021-07-11T05:58:02.709Z" title="发表于 2021-07-11 13:58:02">2021-07-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/06/26/%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%9A%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84%E5%AE%9E%E7%8E%B0/" title="高性能服务器：连接池的实现"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="高性能服务器：连接池的实现"/></a><div class="content"><a class="title" href="/2021/06/26/%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%9A%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84%E5%AE%9E%E7%8E%B0/" title="高性能服务器：连接池的实现">高性能服务器：连接池的实现</a><time datetime="2021-06-26T07:26:32.802Z" title="发表于 2021-06-26 15:26:32">2021-06-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/06/19/Qt%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%A8%8B%E5%BA%8F/" title="Qt实现一个聊天室程序"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Qt实现一个聊天室程序"/></a><div class="content"><a class="title" href="/2021/06/19/Qt%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%A8%8B%E5%BA%8F/" title="Qt实现一个聊天室程序">Qt实现一个聊天室程序</a><time datetime="2021-06-19T13:15:04.081Z" title="发表于 2021-06-19 21:15:04">2021-06-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 橙</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><img src="https://static.dy208.cn/o_1dfilp8ruo521thr1hvf18ji17soa.png">
<a href="https://www.beian.miit.gov.cn/"  style="color:#f72b07" target="_blank">粤ICP备2021078823号</a></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>